将指定的流条目追加到具有指定键的流中。
如果该键不存在, 作为运行此命令的副作用
键是使用流值创建的。流的密钥的创建可以是
禁用`NOMKSTREAM`选择。

条目由字段-值对的列表组成。
字段值对的存储顺序与用户给出的顺序相同。
读取流的命令, 例如`XRANGE`或`XREAD`, 保证以与添加顺序完全相同的顺序返回字段和值`XADD`.

`XADD`是*只有 Redis 命令*可以将数据添加到流中, 但是
还有其他命令, 例如`XDEL`和`XTRIM`, 则能够
从流中删除数据。

## 将流 ID 指定为参数

流条目 ID 标识流中的给定条目。

这`XADD`命令将自动生成一个唯一的 ID, 如果 ID 参数
指定的是`*`字符 (星号 ASCII 字符) 。, 是, 虽然
仅在极少数情况下有用, 可以指定格式正确的ID, 因此
新条目将完全按照指定的 ID 添加。

ID 由两个数字指定, 由`-`字符：

    1526919030474-55

这两个数量都是 64 位数字。自动生成 ID 时, 
第一部分是Redis实例生成的Unix时间 (以毫秒为单) ) 
该 ID。第二部分只是一个序列号, 用于
区分在同一毫秒内生成的 ID。

您还可以指定一个不完整的 ID, 该 ID 仅由毫秒部分组成, 该 ID 被解释为序列部分的零值。
要仅自动生成序列部分, 请指定毫秒部分, 后跟`-`分隔符和`*`字符：

    > XADD mystream 1526919030474-55 message "Hello,"
    "1526919030474-55"
    > XADD mystream 1526919030474-* message " World!"
    "1526919030474-56"

ID 保证始终是增量的：如果将
条目刚刚插入它将大于任何其他过去的ID, 因此条目
完全在流中排序。为了保证这一属性, 
如果流中的当前顶部 ID 的时间大于当前
实例的本地时间, 将使用顶部输入时间, 并且
ID 的序列部分递增。例如, 当
本地时钟向后跳转, 或者如果故障转移后新主时钟具有
一个不同的绝对时间。

当用户将显式 ID 指定为`XADD`, 则最低有效 ID 为
`0-1`和用户*必须*指定一个大于任何其他 ID 的 ID
当前在流中的 ID, 否则命令将失败并返回错误。通常
仅当有另一个系统生成
唯一的 ID (例如 SQL ), ) , 并且您确实需要 Redis 流
与此其他系统相匹配的 ID。

## 封顶流

`XADD`包含与`XTRIM`命令 - 有关详细信息, 请参阅其文档页面。
这允许添加新条目, 并通过对`XADD`, 有效地用任意阈值限制流。
尽管精确修剪是可能的, 并且是默认设置, 但由于蒸汽的内部表示, 添加入口和修剪流更有效`XADD`用**几乎精确**修剪 (`~`参) ) 。

例如, 呼叫`XADD`采用以下形式：

    XADD mystream MAXLEN ~ 1000 * ... entry fields here ...

将添加一个新条目, 但也会逐出旧条目, 以便流仅包含 1000 个条目, 或最多包含几十个条目。

## 有关流的其他信息

有关 Redis 流的更多信息, 请查看我们的
[Redis Streams 文档简介](/topics/streams-intro).

@return

@bulk字符串回复, 具体而言：

该命令返回添加的条目的 ID。ID 是自动生成的 ID
如果`*`作为 ID 参数传递, 否则该命令仅返回相同的 ID
由用户在插入期间指定。

该命令 @nil在与`NOMKSTREAM`选项和
键不存在。

@examples

```cli
XADD mystream * name Sara surname OConnor
XADD mystream * field1 value1 field2 value2 field3 value3
XLEN mystream
XRANGE mystream - +
```
