将具有指定分数的所有指定成员添加到排序集
存储在`key`.
可以指定多个分数/成员对。
如果指定的成员已经是已排序集的成员，则分数为
更新并将元素重新插入到正确的位置，以确保正确
订购。

如果`key`不存在，则为具有指定成员的唯一新排序集
将创建成员，就像排序集为空一样。如果该键存在但未保存已排序集，则返回错误。

分数值应为双精度浮点数的字符串表示形式。`+inf`和`-inf`值也是有效值。

## ZADD 选项

ZADD 支持在键名称之后和之前指定的选项列表
第一个分数参数。选项包括：

*   **二十**：仅更新已存在的元素。不要添加新元素。
*   **断续器**：仅添加新元素。不要更新已存在的元素。
*   **LT**：仅当新分数为**小于**当前分数。此标志不会阻止添加新元素。
*   **燃气轮机**：仅当新分数为**大于**当前分数。此标志不会阻止添加新元素。
*   **中文**：将返回值从添加的新元素数修改为已更改的元素总数（CH 是*改变*).更改的元素是**添加了新元素**和已存在的元素**分数已更新**.因此，在命令行中指定的元素与过去具有相同分数的元素不计算在内。注：通常返回值为`ZADD`仅计算添加的新元素的数量。
*   **国际唱片业协会**：指定此选项时`ZADD`行为类似于`ZINCRBY`.在此模式下只能指定一个分数元素对。

注意：**燃气轮机**,**LT**和**断续器**选项是互斥的。

## 可以精确表示的整数分数范围

Redis 排序集使用*双 64 位浮点数*以表示分数。在我们支持的所有体系结构中，这表示为**IEEE 754 浮点数**，能够精确地表示介于`-(2^53)`和`+(2^53)`包括。更实际地说，-9007199254740992和9007199254740992之间的所有整数都是完全可表示的。较大的整数或分数在内部以指数形式表示，因此您可能只得到您设置为分数的十进制数或非常大的整数的近似值。

## 已分类集 101

排序的集合按其分数以升序方式排序。
同一元素只存在一次，没有重复的元素
允许。分数可以通过以下方式修改`ZADD`这将更新
元素分数，以及作为副作用，它在排序集上的位置，以及
由`ZINCRBY`可用于更新分数相对于其
以前的值。

可以使用`ZSCORE`命令
也可用于验证元素是否已存在。

有关排序集的简介，请参阅[排序
集][tdtss].

[tdtss]: /topics/data-types#sorted-sets

## 具有相同分数的元素

虽然相同的元素不能在排序集中重复，因为每个元素
是唯一的，可以添加多个不同的元素*具有相同的分数*.当多个元素具有相同的分数时，它们是*按字典顺序排序*（它们仍然按分数作为第一个键排序，但是，在本地，具有相同分数的所有元素在字典上都是相对有序的）。

使用的词典排序是二进制的，它将字符串比较为字节数组。

如果用户插入具有相同分数的排序集中的所有元素（例如 0），则排序集的所有元素都将按字典顺序排序，并且可以使用命令对元素进行范围查询`ZRANGEBYLEX`（注意：也可以使用以下方法按分数范围查询排序集`ZRANGEBYSCORE`).

@return

@integer回复，具体而言：

*   在没有可选参数的情况下使用时，添加到排序集的元素数（不包括分数更新）。
*   如果`CH`选项，即已更改（添加或更新）的元素数。

如果`INCR`选项，则返回值将@bulk字符串回复：

*   新乐谱`member`（双精度浮点数）表示为字符串，或`nil`如果操作已中止（当使用`XX`或`NX`选项）。

@examples

```cli
ZADD myzset 1 "one"
ZADD myzset 1 "uno"
ZADD myzset 2 "two" 3 "three"
ZRANGE myzset 0 -1 WITHSCORES
```
