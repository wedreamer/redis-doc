以原子方式将密钥从源 Redis 实例传输到目标 Redis 实例
实例。
成功后，将从原始实例中删除密钥，并保证
存在于目标实例中。

该命令是原子的，并在所需的时间内阻止两个实例
转移密钥，在任何给定时间，密钥将出现在给定的密钥中
实例或另一个实例中，除非发生超时错误。在 3.2 和
以上，多个键可以在一次调用中流水线化`MIGRATE`通过
空字符串 （“”） 作为键并添加`!KEYS`第。

该命令在内部使用`DUMP`生成密钥的序列化版本
值，以及`RESTORE`以合成目标实例中的密钥。
源实例充当目标实例的客户端。
如果目标实例将 OK 返回到`RESTORE`命令，源实例
删除密钥使用`DEL`.

超时指定通信的任何时刻的最大空闲时间
目标实例以毫秒为单位。
这意味着操作不需要在指定的范围内完成
毫秒的数量，但传输应该在没有
阻塞超过指定的毫秒数。

`MIGRATE`需要执行 I/O 操作并遵守指定的超时。
当传输过程中出现 I/O 错误或达到超时时
操作已中止，特殊错误 -`IOERR`返回。
发生这种情况时，以下两种情况是可能的：

*   密钥可能位于两个实例上。
*   密钥可能仅在源实例中。

在超时的情况下，密钥不可能丢失，但是
客户端调用`MIGRATE`，如果发生超时错误，应检查
键是*也*存在于目标实例中，并采取相应的行动。

当返回任何其他错误时（从`ERR`)`MIGRATE`保证
该密钥仍然仅存在于原始实例中（除非密钥具有
同样的名字也是*已经*存在于目标实例上）。

如果在源实例中没有要迁移的密钥`NOKEY`返回。
因为在正常情况下可能会丢失密钥，例如从到期开始，
`NOKEY`不是错误。

## 使用单个命令调用迁移多个密钥

从 Redis 3.0.6 开始`MIGRATE`支持新的大容量迁移模式
使用流水线以便在实例之间迁移多个键，而无需
产生往返时间延迟和其他开销
当用单个键移动每个键时`MIGRATE`叫。

为了启用此表单，`!KEYS`选项，并且正常*钥匙*
参数设置为空字符串。将提供实际的密钥名称
在`!KEYS`参数本身，如以下示例所示：

    MIGRATE 192.168.1.34 6379 "" 0 5000 KEYS key1 key2 key3

使用此表单时`NOKEY`仅当没有状态代码时才返回
的键存在于实例中，否则将执行命令，即使
只有一个键存在。

## 选项

*   `!COPY`-- 不要从本地实例中删除密钥。
*   `REPLACE`-- 替换远程实例上的现有密钥。
*   `!KEYS`-- 如果 key 参数为空字符串，则该命令将改为迁移`!KEYS`选项（有关详细信息，请参阅上面的部分）。
*   `!AUTH`-- 使用给定的密码对远程实例进行身份验证。
*   `AUTH2`-- 使用给定的用户名和密码对进行身份验证（Redis 6 或更高版本的 ACL 身份验证样式）。

@return

@simple字符串回复：命令在成功时返回 OK，或者`NOKEY`如果没有键
在源实例中找到。
