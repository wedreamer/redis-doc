返回一个数组，其中包含有关每个 Redis 命令的详细信息。

这`COMMAND`命令是内省的。
其回复描述了服务器可以处理的所有命令。
Redis 客户端可以调用它，以便在握手期间获取服务器的运行时功能。

`COMMAND`也有几个子命令。
有关更多详细信息，请参阅其子命令。

**群集说明：**
此命令对于群集感知客户端特别有用。
此类客户端必须在命令中标识键的名称，以便将请求路由到正确的分片。
尽管大多数命令接受单个键作为其第一个参数，但此规则也有许多例外。
您可以致电`COMMAND`，然后将命令与其各自的关键规范规则之间的映射缓存在客户端中。

它返回的回复是一个数组，每个命令都有一个元素。
描述 Redis 命令的每个元素本身都表示为一个数组。

该命令的数组由固定数量的元素组成。
数组中元素的确切数量取决于服务器的版本。

1.  名字
2.  阿瑞提
3.  标志
4.  第一个键
5.  最后一个键
6.  步
7.  [前交叉韧带类别][ta]（截至 Redis 6.0）
8.  [技巧][tb]（截至 Redis 7.0）
9.  [主要规格][td]（截至 Redis 7.0）
10. 子命令（自 Redis 7.0 起）

## 名字

这是命令的小写名称。

**注意：**
Redis 命令名称不区分大小写。

## 阿瑞提

Arity 是命令期望的参数数。
它遵循一个简单的模式：

*   正整数表示固定数量的参数。
*   负整数表示最小数量的参数。

命令性*始终包括*命令的名称本身（以及子命令（如果适用）。<

例子：

*   `GET`的嫌疑是*2*因为该命令只接受一个参数，并且始终具有以下格式`GET _key_`.
*   `MGET`的嫌疑是*-2*由于该命令至少接受一个参数，但可能接受多个参数：`MGET _key1_ [key2] [key3] ...`.

## 标志

命令标志是一个数组。它可以包含以下简单字符串（状态回复）：

*   **管理：**该命令是管理命令。
*   **问：**即使在哈希槽迁移期间也允许该命令。
    此标志与 Redis 集群部署相关。
*   **阻塞：**该命令可能会阻止请求客户端。
*   **丹尼厄姆**：如果服务器的内存使用率过高，则该命令将被拒绝（请参阅*最大记忆*配置指令）。
*   **快：**该命令在常量或 log（N） 时间内运行。
    此标志用于监视延迟`LATENCY`命令。
*   **装载：**在加载数据库时允许该命令。
*   **可移动键：**这*第一个键*,*最后一个键*和*步*值不能确定所有关键位置。
    客户端需要使用`COMMAND GETKEYS`或[主要规格][td]在这种情况下。
    有关更多详细信息，请参阅下文。
*   **no_auth：**执行命令不需要身份验证。
*   **no_async_loading：**在异步加载期间（即当副本使用无磁盘时）该命令被拒绝`SWAPDB SYNC`，并允许访问旧数据集）。
*   **no_mandatory_keys：**该命令可以接受键名参数，但这些参数不是必需的。
*   **no_multi：**不允许在 上下文中使用该命令[交易](/topics/transactions).
*   **noscript：**无法从中调用命令[脚本](/topics/eval-intro)或[功能](/topics/functions-intro).
*   **酒吧：**该命令与[Redis Pub/Sub](/topics/pubsub).
*   **随机**：该命令返回随机结果，这是逐字脚本复制的一个问题。
    从 Redis 7.0 开始，此标志是一个[命令提示][tb].
*   **只读：**该命令不会修改数据。
*   **sort_for_script：**从脚本调用命令的输出时，将对其进行排序。
*   **skip_monitor：**该命令未显示在`MONITOR`的输出。
*   **skip_slowlog：**该命令未显示在`SLOWLOG`的输出。
    从 Redis 7.0 开始，此标志是一个[命令提示][tb].
*   **陈旧：**当副本具有陈旧数据时，允许该命令。
*   **写：**该命令可能会修改数据。

### 可移动钥匙

考虑`SORT`:

    1) 1) "sort"
       2) (integer) -2
       3) 1) write
          2) denyoom
          3) movablekeys
       4) (integer) 1
       5) (integer) 1
       6) (integer) 1
       ...

某些 Redis 命令没有预先确定的关键位置，或者不容易找到。
对于这些命令，*可移动键*标志指示*第一个键*,*最后一个键*和*步*值不足以找到所有键。

下面是几个具有*可移动键*旗：

*   `SORT`：可选*商店*,*由*和*获取*修饰符后跟键的名称。
*   `ZUNION`：该*数字键*参数指定数字键名称参数。
*   `MIGRATE`：按键出现*钥匙*关键字，并且仅当第二个参数为空字符串时。

Redis 集群客户端需要使用其他措施（如下所示）来查找此类命令的密钥。

您可以使用`COMMAND GETKEYS`命令，并让您的 Redis 服务器报告给定命令调用的所有键。

从 Redis 7.0 开始，客户端可以使用[主要规格](#key-specifications)以标识键名的位置。
唯一需要使用`COMMAND GETKEYS`是`SORT`和`MIGRATE`用于解析密钥规范的客户端。

有关更多信息，请参阅[关键规格页面][tr].

## 第一个键

命令的第一个键名参数的位置。
对于大多数命令，第一个键的位置是 1。
位置 0 始终是命令名称本身。

## 最后一个键

命令的最后一个键名参数的位置。
Redis 命令通常接受一个、两个或多个密钥。

接受单个键的命令同时具有*第一个键*和*最后一个键*设置为 1。

接受两个键名参数的命令，例如`BRPOPLPUSH`,`SMOVE`和`RENAME`，将此值设置为其第二个键的位置。

接受任意数量键的多键命令，例如`MSET`，请使用值 -1。

## 步

步骤或增量*第一个键*和下一个键的位置。

请考虑以下两个示例：

    1) 1) "mset"
       2) (integer) -3
       3) 1) write
          2) denyoom
       4) (integer) 1
       5) (integer) -1
       6) (integer) 2
       ...

<!---->

    1) 1) "mget"
       2) (integer) -2
       3) 1) readonly
          2) fast
       4) (integer) 1
       5) (integer) -1
       6) (integer) 1
       ...

步数允许我们找到键的位置。
例如`MSET`：其语法为`MSET _key1_ _val1_ [key2] [val2] [key3] [val3]...`，因此键位于每隔一个位置（步长值为*2*).
与`MGET`，它使用步长值*1*.

## 前交叉韧带类别

这是一个简单字符串数组，这些字符串是命令所属的 ACL 类别。
请参阅[访问控制列表][ta]页面以获取更多信息。

## 命令提示

有关命令的有用信息。
由客户端/代理使用。

请检查[命令提示][tb]页面以获取更多信息。

## 主要规格

这是一个由命令的关键规范组成的数组。
数组中的每个元素都是一个映射，用于在命令的参数中查找键的方法。

有关更多信息，请查看[关键规格页面][td].

## 子命令

这是一个包含命令的所有子命令（如果有）的数组。
某些 Redis 命令具有子命令（例如，`REWRITE`的子命令`CONFIG`).
数组中的每个元素都表示一个子命令，并遵循与`COMMAND`的回复。

[ta]: /topics/acl

[tb]: /topics/command-tips

[td]: /topics/key-specs

[tr]: /topics/key-specs

@return

@array回复：命令详细信息的嵌套列表。

数组中命令的顺序是随机的。

@examples

以下是`COMMAND`的输出`GET`命令：

    1)  1) "get"
        2) (integer) 2
        3) 1) readonly
           2) fast
        4) (integer) 1
        5) (integer) 1
        6) (integer) 1
        7) 1) @read
           2) @string
           3) @fast
        8) (empty array)
        9) 1) 1) "flags"
              2) 1) read
              3) "begin_search"
              4) 1) "type"
                 2) "index"
                 3) "spec"
                 4) 1) "index"
                    2) (integer) 1
              5) "find_keys"
              6) 1) "type"
                 2) "range"
                 3) "spec"
                 4) 1) "lastkey"
                    2) (integer) 0
                    3) "keystep"
                    4) (integer) 1
                    5) "limit"
                    6) (integer) 0
       10) (empty array)
    ...
