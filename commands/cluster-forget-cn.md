该命令用于删除通过其节点 ID 指定的节点，
从集合*已知节点*接收命令的 Redis 群集节点。
换句话说，指定的节点将从*节点表*的
节点接收命令。

因为当给定节点是群集的一部分时，所有其他节点
参与集群知道它，以便节点成为
已从群集中完全删除，`CLUSTER FORGET`命令必须
发送到所有剩余的节点，无论它们是主节点
或副本。

但是，该命令不能简单地从内部节点中删除节点
表的节点接收命令，它还实现了禁止列表，而不是
允许再次添加同一节点作为处理
*八卦部分*从其他节点接收的检测信号数据包。

## 关于为什么需要禁止名单的细节

在下面的示例中，我们将说明为什么该命令不能只删除
从节点表中给定的节点，但也要防止它被重新插入
又过了一段时间。

假设我们有四个节点，A，B，C和D。为了
仅以三个节点群集A，B，C结束，我们可以按照以下步骤操作：

1.  将所有哈希槽从 D 重新分片到节点 A、B、C。
2.  D 现在是空的，但仍列在 A、B 和 C 的节点表中。
3.  我们联系A，并发送`CLUSTER FORGET D`.
4.  B 向节点 A 发送检测信号数据包，其中列出了节点 D。
5.  A 不再知道节点 D（请参阅步骤 3），因此它开始与 D 握手。
6.  D 结束重新添加到 A 的节点表中。

正如你所看到的，以这种方式删除一个节点是脆弱的，我们需要发送
`CLUSTER FORGET`命令到所有节点尽快希望没有
与此同时，八卦部分处理。由于此问题，
命令实现一个禁止列表，其中包含每个条目的过期时间。

因此，该命令真正的作用是：

1.  指定的节点将从节点表中删除。
2.  已删除节点的节点 ID 将添加到禁止列表中，持续 1 分钟。
3.  在处理从其他节点收到的心跳数据包中的八卦部分时，节点将跳过禁止列表中列出的所有节点 ID。

这样，我们就有一个 60 秒的窗口来通知群集中的所有节点
我们想要删除一个节点。

## 不允许执行命令的特殊条件

该命令不成功，并在以下情况下返回错误：

1.  在节点表中找不到指定的节点 ID。
2.  接收命令的节点是副本，指定的节点 ID 标识其当前主节点。
3.  节点 ID 标识我们要向其发送命令的同一节点。

@return

@simple字符串回复：`OK`如果命令已成功执行，否则将返回错误。
